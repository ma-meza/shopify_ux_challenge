(this.webpackJsonpshopify_ux_challenge=this.webpackJsonpshopify_ux_challenge||[]).push([[0],{1:function(t,e,n){t.exports={disabledButton:"styles_disabledButton__GUcf1",button:"styles_button__3gdzL",inputDiv:"styles_inputDiv__35jMn",shareIcon:"styles_shareIcon__1ELqT",focusedDiv:"styles_focusedDiv__1AGV7",title1:"styles_title1__1h9HJ",title2:"styles_title2__1ZC_Q",regularText:"styles_regularText__3k7jA",topBanner:"styles_topBanner__3CbS0",nominationsMainContainer:"styles_nominationsMainContainer__2hn4b",nominationCardPoster:"styles_nominationCardPoster__33rNN",removeNominationButton:"styles_removeNominationButton__38dAD",contentBody:"styles_contentBody__1em19",searchResultsMainContainer:"styles_searchResultsMainContainer__1rqut",shareLink:"styles_shareLink__2p2vQ",middleText:"styles_middleText__1Pii6"}},26:function(t,e,n){},27:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(4),s=n.n(a),o=n(15),r=n.n(o),c=(n(26),n(16)),l=n(17),u=n(18),h=n(3),d=n(20),m=n(19),p=(n(27),n(5)),b=n.n(p),f=n(1),v=n.n(f),g=n.p+"static/media/search.841f128c.svg",j=n.p+"static/media/trash.0f34c80f.svg",_=n.p+"static/media/share-android.ae50b540.svg",x=function(t){Object(d.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).state={titleSearchInput:"",searchResults:[],nominationsList:[],searchResultErrorMessage:"",omdbError:!1},i.handleInputChange=i.handleInputChange.bind(Object(h.a)(i)),i.nominateMovie=i.nominateMovie.bind(Object(h.a)(i)),i.unNominateMovie=i.unNominateMovie.bind(Object(h.a)(i)),i.isNominated=i.isNominated.bind(Object(h.a)(i)),i.updateLocalStorage=i.updateLocalStorage.bind(Object(h.a)(i)),i.clearLocalStorage=i.clearLocalStorage.bind(Object(h.a)(i)),i.inputRef=s.a.createRef(),i.inputDivRef=s.a.createRef(),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=new URLSearchParams(window.location.search).get("nomi");if(e&&e.length>0){for(var n=e.split("$$"),i=[],a=[],s=0;s<n.length;s++)a.push(b.a.get("https://www.omdbapi.com/?apikey=82ab90b1&i="+n[s]));b.a.all(a).then(b.a.spread((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];for(var s=0;s<n.length;s++)"True"===n[s].data.Response&&i.push(n[s].data);i.length>0&&t.setState({nominationsList:i})})))}else"undefined"!==typeof Storage&&localStorage.movieNominations&&this.setState({nominationsList:JSON.parse(localStorage.movieNominations)});this.inputRef.current&&this.inputDivRef.current&&(this.inputRef.current.onfocus=function(){t.inputDivRef.current.classList.add(v.a.focusedDiv)},this.inputRef.current.onblur=function(){t.inputDivRef.current.classList.remove(v.a.focusedDiv)})}},{key:"handleInputChange",value:function(t){var e=this,n=t.target,i=n.name,a=n.value;"titleSearchInput"===i&&(a.length>0?b.a.get("https://www.omdbapi.com/?apikey=82ab90b1&i&s="+a+"&type=movie").then((function(t){"True"===t.data.Response?e.setState({searchResults:t.data.Search}):t.data.Error&&e.setState({searchResultErrorMessage:t.data.Error})})).catch((function(t){t&&e.setState({omdbError:!0})})):this.setState({searchResults:[],searchResultErrorMessage:""})),this.setState(Object(c.a)({},i,a))}},{key:"updateLocalStorage",value:function(){"undefined"!==typeof Storage&&localStorage.setItem("movieNominations",JSON.stringify(this.state.nominationsList))}},{key:"clearLocalStorage",value:function(){"undefined"!==typeof Storage&&localStorage.removeItem("movieNominations")}},{key:"nominateMovie",value:function(t){for(var e=this,n=t.imdbID,i=this.state.nominationsList,a=0;a<i.length;a++)if(i[a].imdbID===n)return;this.state.nominationsList.length<=4&&(i.push(t),this.setState({nominationsList:i},(function(){e.updateLocalStorage()})))}},{key:"unNominateMovie",value:function(t){for(var e=this,n=t.imdbID,i=this.state.nominationsList,a=0;a<i.length;a++)if(i[a].imdbID===n)return i.splice(a,1),void this.setState({nominationsList:i},(function(){e.updateLocalStorage()}))}},{key:"isNominated",value:function(t){for(var e=0;e<this.state.nominationsList.length;e++)if(this.state.nominationsList[e].imdbID===t)return!0;return!1}},{key:"render",value:function(){var t,e,n,a,s=this;return t=this.state.searchResults.length>0?this.state.searchResults.map((function(t,e){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:[t.Title," (",t.Year,")"]}),s.isNominated(t.imdbID)?Object(i.jsx)("button",{className:v.a.disabledButton,children:"Nominate"}):Object(i.jsx)("button",{className:v.a.button,onClick:function(){s.nominateMovie(t)},children:"Nominate"})]},e)})):this.state.searchResultErrorMessage.length>0?Object(i.jsx)("p",{className:v.a.regularText+" "+v.a.middleText,children:this.state.searchResultErrorMessage}):Object(i.jsx)("p",{className:v.a.regularText+" "+v.a.middleText,children:"Search for a movie title in the input above."}),this.state.nominationsList.length>0?(n="https://marque2.github.io/shopify_ux_challenge?nomi=",e=this.state.nominationsList.map((function(t,e){return n+=t.imdbID+"$$",Object(i.jsxs)("div",{style:{backgroundImage:"url('"+t.Poster+"')"},className:v.a.nominationCardPoster,children:[Object(i.jsx)("div",{onClick:function(){s.unNominateMovie(t)},className:v.a.removeNominationButton,children:Object(i.jsx)("img",{src:j})}),Object(i.jsxs)("p",{className:v.a.regularText,children:[t.Title," ",t.Year]})]},e)})),n=n.substring(0,n.length-2)):e=Object(i.jsx)("p",{children:"Add nominations!!"}),!0===this.state.omdbError&&(a=Object(i.jsx)("div",{children:Object(i.jsx)("p",{children:"There was an error with omdb's server! Please try again."})})),Object(i.jsxs)("div",{className:"App",children:[5===this.state.nominationsList.length?Object(i.jsx)("div",{id:v.a.topBanner,children:Object(i.jsx)("p",{className:v.a.regularText,children:"Your nomination list is full! (5 movies max.)"})}):null,Object(i.jsxs)("div",{id:v.a.contentBody,children:[Object(i.jsx)("p",{className:v.a.title1,children:"The Shoppies Awards"}),Object(i.jsx)("img",{id:v.a.shareIcon,src:_}),Object(i.jsxs)("div",{ref:this.inputDivRef,id:v.a.inputDiv,children:[Object(i.jsx)("img",{src:g}),Object(i.jsx)("input",{ref:this.inputRef,onChange:this.handleInputChange,type:"text",name:"titleSearchInput",value:this.state.titleSearchInput,placeholder:"movie title"})]}),Object(i.jsxs)("div",{id:v.a.searchResultsMainContainer,children:[t,"// ",Object(i.jsxs)("p",{id:v.a.shareLink,children:["Share your nominations list: ",n]})]}),Object(i.jsxs)("div",{id:v.a.nominationsMainContainer,children:[Object(i.jsx)("p",{className:v.a.title2,children:"Nominations"}),e]}),a]})]})}}]),n}(s.a.Component),y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),s(t),o(t)}))};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(x,{})}),document.getElementById("root")),y()}},[[46,1,2]]]);
//# sourceMappingURL=main.96bcbb4f.chunk.js.map